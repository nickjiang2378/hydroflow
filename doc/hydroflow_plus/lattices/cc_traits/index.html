<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This crate provide traits to describe common operations available on data structures. This is particularly useful when building new types on top of generic data structures without relying on the actual implementation of the underlying data structure."><title>hydroflow_plus::lattices::cc_traits - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="hydroflow_plus" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (d7f6ebace 2024-06-16)" data-channel="nightly" data-search-js="search-0fe7219eb170c82e.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../../../crates.js"></script><script defer src="../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../hydroflow_plus/index.html">hydroflow_plus</a><span class="version">0.9.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#macros">Macros</a></li><li><a href="#traits">Traits</a></li></ul></section><h2><a href="../index.html">In hydroflow_plus::lattices</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a href="../../index.html">hydroflow_plus</a>::<wbr><a href="../index.html">lattices</a>::<wbr><a class="mod" href="#">cc_traits</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This crate provide traits to describe common operations available on data structures.
This is particularly useful when building new types on top of generic data structures without relying on the actual implementation of the underlying data structure.</p>
<p>Here is an example of the kind of traits provided by this crate:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// Mutable collection where new elements can be inserted.
</span><span class="kw">pub trait </span>Insert: Collection {
    <span class="doccomment">/// The output of the insertion function.
    </span><span class="kw">type </span>Output;

    <span class="doccomment">/// Insert a new element in the collection.
    </span><span class="kw">fn </span>insert(<span class="kw-2">&amp;mut </span><span class="self">self</span>, element: <span class="self">Self</span>::Item) -&gt; <span class="self">Self</span>::Output;
}</code></pre></div>
<h2 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h2>
<p>Such traits can be used to define collections with special properties,
independently of the actual internal data structure.
For instance the following code defines an <code>Ordered&lt;S&gt;</code> stack collection,
guarantying the well-sortedness of the elements in the stack.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cc_traits::{
    Collection,
    Back,
    PushBack
};

<span class="doccomment">/// Ordered stack.
</span><span class="kw">pub struct </span>Ordered&lt;S&gt; {
    inner: S
}

<span class="kw">impl</span>&lt;S&gt; Ordered&lt;S&gt; {
    <span class="kw">pub fn </span>new() -&gt; <span class="self">Self </span><span class="kw">where </span>S: Default {
        Ordered {
            inner: S::default()
        }
    }
}

<span class="kw">impl</span>&lt;S&gt; Ordered&lt;S&gt; {
    <span class="doccomment">/// Push the given element on the stack iff it is grater or equal
    /// to every other element already in the stack.
    </span><span class="kw">pub fn </span>try_push&lt;T&gt;(<span class="kw-2">&amp;mut </span><span class="self">self</span>, element: T) -&gt; <span class="prelude-ty">Result</span>&lt;(), T&gt;
    <span class="kw">where
        </span>T: PartialOrd,
        S: Collection&lt;Item=T&gt; + Back + PushBack, <span class="comment">// `S` must be a stack providing `back` and `push_back`.
        </span><span class="kw">for</span>&lt;<span class="lifetime">'a</span>&gt; S::ItemRef&lt;<span class="lifetime">'a</span>&gt;: PartialOrd&lt;<span class="kw-2">&amp;</span><span class="lifetime">'a </span>T&gt; <span class="comment">// The reference type must be comparable with other reference types.
    </span>{
        <span class="kw">if </span><span class="self">self</span>.inner.back().map(|back| back &lt;= <span class="kw-2">&amp;</span>element).unwrap_or(<span class="bool-val">true</span>) {
            <span class="self">self</span>.inner.push_back(element);
            <span class="prelude-val">Ok</span>(())
        } <span class="kw">else </span>{
            <span class="prelude-val">Err</span>(element)
        }
    }
}

<span class="attr">#[cfg(feature = <span class="string">"std"</span>)]
</span><span class="kw">fn </span>ordered_stack_usage&lt;S&gt;()
<span class="kw">where
    </span>S: Default + Collection&lt;Item = i32&gt; + Back + PushBack,
    <span class="kw">for</span>&lt;<span class="lifetime">'a</span>&gt; S::ItemRef&lt;<span class="lifetime">'a</span>&gt;: PartialOrd&lt;<span class="kw-2">&amp;</span><span class="lifetime">'a </span>i32&gt;,
{
    <span class="kw">let </span><span class="kw-2">mut </span>ordered: Ordered&lt;S&gt; = Ordered::new();
    <span class="macro">assert!</span>(ordered.try_push(<span class="number">1</span>).is_ok());
    <span class="macro">assert!</span>(ordered.try_push(<span class="number">2</span>).is_ok());
    <span class="macro">assert!</span>(ordered.try_push(<span class="number">0</span>).is_err());
}

<span class="attr">#[cfg(feature = <span class="string">"std"</span>)]
</span>ordered_stack_usage::&lt;Vec&lt;i32&gt;&gt;(); <span class="comment">// a `Vec` is a stack so it works.

</span><span class="attr">#[cfg(feature = <span class="string">"std"</span>)]
</span><span class="kw">use </span>std::collections::VecDeque;
<span class="attr">#[cfg(feature = <span class="string">"std"</span>)]
</span>ordered_stack_usage::&lt;VecDeque&lt;i32&gt;&gt;(); <span class="comment">// a `VecDeque` is also a stack.</span></code></pre></div>
<h2 id="trait-aliases"><a class="doc-anchor" href="#trait-aliases">§</a>Trait aliases</h2>
<p>By enabling the <code>nightly</code> you can get access to
some trait alias definitions that can be useful to reduce the
verbosity of your code.
Here is an example of such aliases defining the common interface of stacks:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">pub trait </span>Stack&lt;T&gt; = Collection&lt;Item=T&gt; + Len + Back;
<span class="kw">pub trait </span>StackMut&lt;T&gt; = Stack&lt;T&gt; + BackMut + PushBack + PopBack;</code></pre></div>
<p>As of version 0.8.0, those traits are also available without the <code>nightly</code>
feature as regular trait definitions.</p>
<h2 id="standard-library"><a class="doc-anchor" href="#standard-library">§</a>Standard library</h2>
<p>By default, all the traits defined in this crate are implemented (when relevant)
for the standard library collections.
You can disable it by using the <code>nostd</code> feature.</p>
<h2 id="foreign-implementations"><a class="doc-anchor" href="#foreign-implementations">§</a>Foreign implementations</h2>
<p>In addition to the standard library,
traits are implemented for
some popular crates if you enable the feature of the same name.
Here are the supported crates:</p>
<ul>
<li><a href="https://crates.io/crates/slab"><code>slab</code></a> providing the <code>Slab</code> collection.</li>
<li><a href="https://crates.io/crates/smallvec"><code>smallvec</code></a> providing the <code>SmallVec</code> collection.</li>
<li><a href="https://crates.io/crates/serde_json"><code>serde_json</code></a> providing the <code>Map&lt;String, Value&gt;</code> collection for JSON objects.</li>
<li><a href="https://crates.io/crates/ijson"><code>ijson</code></a> providing the <code>IObject</code> and <code>IArray</code> collections.</li>
</ul>
</div></details><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.covariant_item_mut.html" title="macro hydroflow_plus::lattices::cc_traits::covariant_item_mut">covariant_item_mut</a></div><div class="desc docblock-short">Automatically defines the <code>CollectionMut::upcast_item_mut</code> function using the
covariance of the <code>ItemMut&lt;'a&gt;</code> type with regards to <code>'a</code>.</div></li><li><div class="item-name"><a class="macro" href="macro.covariant_item_ref.html" title="macro hydroflow_plus::lattices::cc_traits::covariant_item_ref">covariant_item_ref</a></div><div class="desc docblock-short">Automatically defines the <code>CollectionRef::upcast_item_ref</code> function using the
covariance of the <code>ItemRef&lt;'a&gt;</code> type with regards to <code>'a</code>.</div></li><li><div class="item-name"><a class="macro" href="macro.covariant_key_ref.html" title="macro hydroflow_plus::lattices::cc_traits::covariant_key_ref">covariant_key_ref</a></div><div class="desc docblock-short">Automatically defines the <code>KeyedRef::upcast_item_ref</code> function using the
covariance of the <code>KeyRef&lt;'a&gt;</code> type with regards to <code>'a</code>.</div></li><li><div class="item-name"><a class="macro" href="macro.simple_collection_mut.html" title="macro hydroflow_plus::lattices::cc_traits::simple_collection_mut">simple_collection_mut</a></div><div class="desc docblock-short">Automatically defines the <code>CollectionMut::upcast_item_mut</code> function using the
covariance of the <code>ItemMut&lt;'a&gt;</code> type with regards to <code>'a</code>.</div></li><li><div class="item-name"><a class="macro" href="macro.simple_collection_ref.html" title="macro hydroflow_plus::lattices::cc_traits::simple_collection_ref">simple_collection_ref</a></div><div class="desc docblock-short">Automatically defines the <code>SimpleCollectionRef::into_ref</code> function.</div></li><li><div class="item-name"><a class="macro" href="macro.simple_keyed_ref.html" title="macro hydroflow_plus::lattices::cc_traits::simple_keyed_ref">simple_keyed_ref</a></div><div class="desc docblock-short">Automatically defines the <code>SimpleKeyedRef::into_ref</code> function.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Back.html" title="trait hydroflow_plus::lattices::cc_traits::Back">Back</a></div><div class="desc docblock-short">Collection exposing a reference to its back element.</div></li><li><div class="item-name"><a class="trait" href="trait.BackMut.html" title="trait hydroflow_plus::lattices::cc_traits::BackMut">BackMut</a></div><div class="desc docblock-short">Collection exposing a mutable reference to its back element.</div></li><li><div class="item-name"><a class="trait" href="trait.Capacity.html" title="trait hydroflow_plus::lattices::cc_traits::Capacity">Capacity</a></div><div class="desc docblock-short">Collection with known capacity.</div></li><li><div class="item-name"><a class="trait" href="trait.CapacityMut.html" title="trait hydroflow_plus::lattices::cc_traits::CapacityMut">CapacityMut</a></div><div class="desc docblock-short">Collection with mutable capacity.</div></li><li><div class="item-name"><a class="trait" href="trait.Clear.html" title="trait hydroflow_plus::lattices::cc_traits::Clear">Clear</a></div><div class="desc docblock-short">Clearable collection.</div></li><li><div class="item-name"><a class="trait" href="trait.Collection.html" title="trait hydroflow_plus::lattices::cc_traits::Collection">Collection</a></div><div class="desc docblock-short">Abstract collection.</div></li><li><div class="item-name"><a class="trait" href="trait.CollectionMut.html" title="trait hydroflow_plus::lattices::cc_traits::CollectionMut">CollectionMut</a></div><div class="desc docblock-short">Abstract collection that can be mutably referenced.</div></li><li><div class="item-name"><a class="trait" href="trait.CollectionRef.html" title="trait hydroflow_plus::lattices::cc_traits::CollectionRef">CollectionRef</a></div><div class="desc docblock-short">Abstract collection that can be immutably referenced.</div></li><li><div class="item-name"><a class="trait" href="trait.Deque.html" title="trait hydroflow_plus::lattices::cc_traits::Deque">Deque</a></div><div class="desc docblock-short">Immutable double-ended queue.</div></li><li><div class="item-name"><a class="trait" href="trait.DequeMut.html" title="trait hydroflow_plus::lattices::cc_traits::DequeMut">DequeMut</a></div><div class="desc docblock-short">Mutable double-ended queue.</div></li><li><div class="item-name"><a class="trait" href="trait.Front.html" title="trait hydroflow_plus::lattices::cc_traits::Front">Front</a></div><div class="desc docblock-short">Collection exposing a reference to its front element.</div></li><li><div class="item-name"><a class="trait" href="trait.FrontMut.html" title="trait hydroflow_plus::lattices::cc_traits::FrontMut">FrontMut</a></div><div class="desc docblock-short">Collection exposing a mutable reference to its front element.</div></li><li><div class="item-name"><a class="trait" href="trait.Get.html" title="trait hydroflow_plus::lattices::cc_traits::Get">Get</a></div><div class="desc docblock-short">Queryable collection.</div></li><li><div class="item-name"><a class="trait" href="trait.GetKeyValue.html" title="trait hydroflow_plus::lattices::cc_traits::GetKeyValue">GetKeyValue</a></div><div class="desc docblock-short">Queryable map.</div></li><li><div class="item-name"><a class="trait" href="trait.GetKeyValueMut.html" title="trait hydroflow_plus::lattices::cc_traits::GetKeyValueMut">GetKeyValueMut</a></div><div class="desc docblock-short">Mutably queryable map.</div></li><li><div class="item-name"><a class="trait" href="trait.GetMut.html" title="trait hydroflow_plus::lattices::cc_traits::GetMut">GetMut</a></div><div class="desc docblock-short">Mutably queryable collection.</div></li><li><div class="item-name"><a class="trait" href="trait.Insert.html" title="trait hydroflow_plus::lattices::cc_traits::Insert">Insert</a></div><div class="desc docblock-short">Mutable collection where new elements can be inserted.</div></li><li><div class="item-name"><a class="trait" href="trait.Iter.html" title="trait hydroflow_plus::lattices::cc_traits::Iter">Iter</a></div><div class="desc docblock-short">Iterable collection.</div></li><li><div class="item-name"><a class="trait" href="trait.IterMut.html" title="trait hydroflow_plus::lattices::cc_traits::IterMut">IterMut</a></div><div class="desc docblock-short">Mutably iterable collection.</div></li><li><div class="item-name"><a class="trait" href="trait.Keyed.html" title="trait hydroflow_plus::lattices::cc_traits::Keyed">Keyed</a></div><div class="desc docblock-short">Abstract keyed collection.</div></li><li><div class="item-name"><a class="trait" href="trait.KeyedRef.html" title="trait hydroflow_plus::lattices::cc_traits::KeyedRef">KeyedRef</a></div><div class="desc docblock-short">Abstract keyed collection whose key can be referenced.</div></li><li><div class="item-name"><a class="trait" href="trait.Len.html" title="trait hydroflow_plus::lattices::cc_traits::Len">Len</a></div><div class="desc docblock-short">Sized collection.</div></li><li><div class="item-name"><a class="trait" href="trait.Map.html" title="trait hydroflow_plus::lattices::cc_traits::Map">Map</a></div><div class="desc docblock-short">Imutable map data structure.</div></li><li><div class="item-name"><a class="trait" href="trait.MapInsert.html" title="trait hydroflow_plus::lattices::cc_traits::MapInsert">MapInsert</a></div><div class="desc docblock-short">Mutable map where new new key-value pairs can be inserted.</div></li><li><div class="item-name"><a class="trait" href="trait.MapIter.html" title="trait hydroflow_plus::lattices::cc_traits::MapIter">MapIter</a></div></li><li><div class="item-name"><a class="trait" href="trait.MapIterMut.html" title="trait hydroflow_plus::lattices::cc_traits::MapIterMut">MapIterMut</a></div></li><li><div class="item-name"><a class="trait" href="trait.MapMut.html" title="trait hydroflow_plus::lattices::cc_traits::MapMut">MapMut</a></div><div class="desc docblock-short">Mutable map data structure.</div></li><li><div class="item-name"><a class="trait" href="trait.PopBack.html" title="trait hydroflow_plus::lattices::cc_traits::PopBack">PopBack</a></div><div class="desc docblock-short">Mutable collection where elements can be popped from the back.</div></li><li><div class="item-name"><a class="trait" href="trait.PopFront.html" title="trait hydroflow_plus::lattices::cc_traits::PopFront">PopFront</a></div><div class="desc docblock-short">Mutable collection where elements can be popped from the front.</div></li><li><div class="item-name"><a class="trait" href="trait.PushBack.html" title="trait hydroflow_plus::lattices::cc_traits::PushBack">PushBack</a></div><div class="desc docblock-short">Mutable collection where new elements can be pushed on the back.</div></li><li><div class="item-name"><a class="trait" href="trait.PushFront.html" title="trait hydroflow_plus::lattices::cc_traits::PushFront">PushFront</a></div><div class="desc docblock-short">Mutable collection where new elements can be pushed on the front.</div></li><li><div class="item-name"><a class="trait" href="trait.Remove.html" title="trait hydroflow_plus::lattices::cc_traits::Remove">Remove</a></div><div class="desc docblock-short">Mutable collection where elements can be removed from.</div></li><li><div class="item-name"><a class="trait" href="trait.Reserve.html" title="trait hydroflow_plus::lattices::cc_traits::Reserve">Reserve</a></div><div class="desc docblock-short">Collection that can extend their capacity.</div></li><li><div class="item-name"><a class="trait" href="trait.Set.html" title="trait hydroflow_plus::lattices::cc_traits::Set">Set</a></div><div class="desc docblock-short">Imutable set data structure.</div></li><li><div class="item-name"><a class="trait" href="trait.SetMut.html" title="trait hydroflow_plus::lattices::cc_traits::SetMut">SetMut</a></div><div class="desc docblock-short">Mutable set data structure.</div></li><li><div class="item-name"><a class="trait" href="trait.SimpleCollectionMut.html" title="trait hydroflow_plus::lattices::cc_traits::SimpleCollectionMut">SimpleCollectionMut</a></div><div class="desc docblock-short">Collection where each item reference can be converted into a standard
“simple” rust reference.</div></li><li><div class="item-name"><a class="trait" href="trait.SimpleCollectionRef.html" title="trait hydroflow_plus::lattices::cc_traits::SimpleCollectionRef">SimpleCollectionRef</a></div><div class="desc docblock-short">Collection where each item reference can be converted into a standard
“simple” rust reference.</div></li><li><div class="item-name"><a class="trait" href="trait.SimpleKeyedRef.html" title="trait hydroflow_plus::lattices::cc_traits::SimpleKeyedRef">SimpleKeyedRef</a></div><div class="desc docblock-short">Keyed collection where each key reference can be converted into a standard
“simple” rust reference.</div></li><li><div class="item-name"><a class="trait" href="trait.Slab.html" title="trait hydroflow_plus::lattices::cc_traits::Slab">Slab</a></div><div class="desc docblock-short">Imutable slab data structure.</div></li><li><div class="item-name"><a class="trait" href="trait.SlabMut.html" title="trait hydroflow_plus::lattices::cc_traits::SlabMut">SlabMut</a></div><div class="desc docblock-short">Mutable slab data structure.</div></li><li><div class="item-name"><a class="trait" href="trait.Stack.html" title="trait hydroflow_plus::lattices::cc_traits::Stack">Stack</a></div><div class="desc docblock-short">Immutable stack data structure.</div></li><li><div class="item-name"><a class="trait" href="trait.StackMut.html" title="trait hydroflow_plus::lattices::cc_traits::StackMut">StackMut</a></div><div class="desc docblock-short">Mutable stack data structure.</div></li><li><div class="item-name"><a class="trait" href="trait.Vec.html" title="trait hydroflow_plus::lattices::cc_traits::Vec">Vec</a></div><div class="desc docblock-short">Immutable array data structure (conventionally nammed “Vec”).</div></li><li><div class="item-name"><a class="trait" href="trait.VecDeque.html" title="trait hydroflow_plus::lattices::cc_traits::VecDeque">VecDeque</a></div><div class="desc docblock-short">Immutable indexable deque.</div></li><li><div class="item-name"><a class="trait" href="trait.VecDequeMut.html" title="trait hydroflow_plus::lattices::cc_traits::VecDequeMut">VecDequeMut</a></div><div class="desc docblock-short">Mutable indexable deque.</div></li><li><div class="item-name"><a class="trait" href="trait.VecMut.html" title="trait hydroflow_plus::lattices::cc_traits::VecMut">VecMut</a></div><div class="desc docblock-short">Mutable Vec data structure.</div></li><li><div class="item-name"><a class="trait" href="trait.WithCapacity.html" title="trait hydroflow_plus::lattices::cc_traits::WithCapacity">WithCapacity</a></div><div class="desc docblock-short">Collection that can be created with a minimum given capacity.</div></li></ul></section></div></main></body></html>